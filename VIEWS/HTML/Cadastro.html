<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Bella Avventura</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://i.ibb.co/vx2Dzj9v/image.png">
  <style>
    @font-face {
      font-family: 'GaramondBold';
      src: local('Garamond'), serif;
      font-weight: bold;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Inter', sans-serif;
      font-weight: 700;
      display: flex;
      flex-direction: column;
      background-color: #f3f7f3;
    }

    .wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .main-content {
      flex: 1;
      padding-bottom: 20px;
    }

    .header {
      background-color: #A7D096;
      position: relative;
      height: 86px;
    }

    .header-img img {
      height: 126px;
    }

    .header-img {
      position: absolute;
      top: -50px;
      left: 50%;
      transform: translateX(-5%);
      z-index: 1;
    }

    .floating {
      animation: float 3s ease-in-out infinite;
    }

    .top-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 30px;
      background-color: #A7D096;
    }

    .menu-icon {
      font-size: 24px;
      cursor: pointer;
    }

    .user-header {
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .cadastro-container {
      max-width: 500px;
      margin: 5rem auto;
      padding: 2rem;
      text-align: center;
    }

    .cadastro-title {
      font-family: 'GaramondBold', serif;
      color: #5a8f3d;
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    .cadastro-box {
      background-color: white;
      padding: 2rem;
      border-radius: 12px;
      border: 3px solid #D8E6D9;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #5a8f3d;
      font-weight: bold;
    }

    .form-group input {
      width: 94%;
      padding: 0.78rem;
      border: 2px solid #D8E6D9;
      border-radius: 8px;
      font-size: 1rem;
    }

    .cadastro-button {
      background-color: #5a8f3d;
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
      margin-top: 1rem;
      transition: background-color 0.3s;
    }

    .cadastro-button:hover {
      background-color: #4a7d2d;
    }

    .back-button {
      display: inline-block;
      color: #5a8f3d;
      text-decoration: none;
      font-weight: bold;
      margin-top: 1rem;
    }

    .footer {
      background-color: #A7D096;
      padding: 20px;
      color: #000;
      font-size: 14px;
      text-align: center;
      width: auto;
      flex-shrink: 0;
    }

    .footer-top {
      margin-bottom: 15px;
      font-size: 33%;
    }

    .footer-top img {
      width: 15%;
      height: auto;
    }

    .footer-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .footer-left,
    .footer-center,
    .footer-right {
      flex: 1;
      text-align: center;
    }

    .footer-left {
      text-align: left;
    }

    .footer-right {
      text-align: right;
    }

    .footer-bottom a {
      text-decoration: underline;
      color: black;
    }

    @keyframes float {
      0% {
        transform: translate(-50%, 0px);
      }

      50% {
        transform: translate(-50%, -5px);
      }

      100% {
        transform: translate(-50%, 0px);
      }
    }

    @media (max-width: 600px) {
      .cadastro-container {
        padding: 1rem;
        margin: 3rem auto;
      }

      .header-img img {
        height: 100px;
        top: -30px;
      }

      .footer-bottom {
        flex-direction: column;
        text-align: center;
      }

      .footer-left,
      .footer-center,
      .footer-right {
        text-align: center;
      }
    }

    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 15px 25px;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease, top 0.3s ease;
      background-color: #4CAF50;
    }

    .notification.show {
      top: 30px;
      opacity: 1;
    }
  </style>
</head>

<body>

  <div class="wrapper">
    <!-- Header -->
    <div class="top-header">
      <div class="menu-icon">â˜°</div>
      <div class="user-header">
        <span>ðŸ‘¤</span> Visitante
      </div>
    </div>

    <div class="header">
      <div class="header-img">
        <a href="Entrada.html">
          <img src="https://i.ibb.co/Q7T008b1/image.png" alt="Logo" class="floating" />
        </a>
      </div>
    </div>

    <!-- Menu Hamburger -->
    <div id="menuContainer1"></div>
    <div id="notification" class="notification"></div>

    <!-- ConteÃºdo -->
    <main class="main-content">
      <div class="cadastro-container">
        <h1 class="cadastro-title">Cadastre-se</h1>
        <div class="cadastro-box">
          <div class="form-group">
            <label for="nome">Nome completo</label>
            <input type="text" id="nome" name="nome" placeholder="Digite seu nome">
          </div>

          <div class="form-group">
            <label for="cpf">CPF</label>
            <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" maxlength="14">
          </div>

          <div class="form-group">
            <label for="email">E-mail</label>
            <input type="email" id="email" name="email" placeholder="email@exemplo.com">
          </div>

          <div class="form-group">
            <label for="senha">Senha</label>
            <input type="password" id="senha" name="senha" placeholder="Crie uma senha">
          </div>

          <button type="submit" class="cadastro-button" onclick="realizarCadastro()">Cadastrar</button>
          <a href="Login.html" class="back-button">Voltar para o Login</a>
        </div>
      </div>
    </main>

    <!-- RodapÃ© -->
    <footer class="footer">
      <div class="footer-top">
        <a href="https://www.bellaavventura.com.br/">
          <img src="https://i.ibb.co/j9vGknyy/image.png" alt="image" border="0">
        </a>
      </div>
      <div class="footer-bottom">
        <div class="footer-left">
          <a href="mailto:bella.avventura@gmail.com">ðŸ“§ bella.avventura@gmail.com</a>
        </div>
        <div class="footer-center">Â© 2025 Bella Avventura</div>
        <div class="footer-right">
          <a href="TermosCondicoes.html">Termos e condiÃ§Ãµes</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // MÃ¡scara para CPF
      const cpfInput = document.getElementById('cpf');
      cpfInput.addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 11) {
          value = value.substring(0, 11); // Limita a 11 dÃ­gitos
        }
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        e.target.value = value;
      });

      // Carrega menu nÃ£o logado
      fetch('MenuNaoLogado.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('menuContainer1').innerHTML = html;
          setupMenu();
        });
    });

    function setupMenu() {
      const menu = document.getElementById('menu-nao-logado');
      const menuIcon = document.querySelector('.menu-icon');

      if (menu && menuIcon) {
        menuIcon.addEventListener('click', () => {
          menu.classList.toggle('hidden');
          menu.classList.toggle('visible');
        });
      }
    }

    function realizarCadastro() {
      const nome = document.getElementById('nome').value.trim();
      const cpf = document.getElementById('cpf').value.replace(/\D/g, ''); // Remove formataÃ§Ã£o
      const email = document.getElementById('email').value.trim();
      const senha = document.getElementById('senha').value;

      // ValidaÃ§Ã£o dos campos
      if (!nome || !cpf || !email || !senha) {
        showNotification('Preencha todos os campos!', 'error');
        return;
      }

      // ValidaÃ§Ã£o bÃ¡sica de CPF (11 dÃ­gitos)
      if (cpf.length !== 11) {
        showNotification('CPF invÃ¡lido! Deve conter 11 dÃ­gitos.', 'error');
        return;
      }

      // ValidaÃ§Ã£o bÃ¡sica de email
      if (!email.includes('@') || !email.includes('.')) {
        showNotification('Email invÃ¡lido!', 'error');
        return;
      }

      // Pega usuÃ¡rios existentes ou cria array vazio
      const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];

      // Verifica se CPF ou email jÃ¡ existem
      if (usuarios.some(u => u.cpf === cpf)) {
        showNotification('CPF jÃ¡ cadastrado!', 'error');
        return;
      }

      if (usuarios.some(u => u.email.toLowerCase() === email.toLowerCase())) {
        showNotification('Email jÃ¡ cadastrado!', 'error');
        return;
      }

      // Cria novo usuÃ¡rio
      const novoUsuario = {
        id: Date.now().toString(), // ID Ãºnico
        firstName: nome.split(' ')[0],
        lastName: nome.split(' ').slice(1).join(' '),
        nome,
        cpf,
        email: email.toLowerCase(), // Armazena em minÃºsculas
        senha,
        dataCadastro: new Date().toISOString()
      };

      // Adiciona ao array e salva
      usuarios.push(novoUsuario);
      localStorage.setItem('usuarios', JSON.stringify(usuarios));

      // Salva como usuÃ¡rio atual
      localStorage.setItem('currentUser', JSON.stringify(novoUsuario));

      showNotification('Cadastro realizado com sucesso!', 'success');

      // Redireciona para a pÃ¡gina de login apÃ³s 2 segundos
      setTimeout(() => {
        window.location.href = 'Login.html?from=cadastro';
      }, 2000);
    }

    function showNotification(message, type) {
      const notif = document.getElementById('notification');
      notif.textContent = message;
      notif.style.backgroundColor = type === 'success' ? '#4CAF50' : '#F44336';
      notif.classList.add('show');

      setTimeout(() => {
        notif.classList.remove('show');
      }, 3000);
    }
  </script>
</body>

</html>